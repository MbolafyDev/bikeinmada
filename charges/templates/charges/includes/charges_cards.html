{# templates/charges/includes/charges_cards.html #}
{% load nombre %}
{% if charges %}
  <div class="row">
    {% for charge in charges %}
      <div class="col-md-6 col-lg-4 col-xl-3 mb-3">
        <div class="card shadow-sm h-100 {% if charge.statut_publication == 'supprimé' %}opacity-50{% endif %}">
          <div class="card-body">
            <h5 class="card-title text-success">{{ charge.libelle.libelle }}</h5>
            <p class="mb-1"><strong>Date :</strong> {{ charge.date|date:"d/m/Y" }}</p>
            <p class="mb-0"><strong>Page :</strong> {{ charge.page.nom|default:"-" }}</p>
            <p class="mb-1"><strong>Paiement :</strong> {{ charge.paiement.nom }}</p>
            <p class="mb-1"><strong>Remarque :</strong> {{ charge.remarque|default:"-" }}</p>
            <p class="mb-1"><strong>P.U :</strong> {{ charge.pu|intpoint }} - <strong>Qté :</strong> {{ charge.quantite }}</p>
            <p class="mb-1"><strong>Montant :</strong> {{ charge.montant|intpoint }} Ar</p>
          </div>
          <div class="card-footer text-end">
            <button class="btn btn-sm btn-outline-success me-2"
                    data-bs-toggle="modal"
                    data-bs-target="#editModal{{ charge.id }}"
                    {% if not is_admin or charge.statut_publication == 'supprimé' %}disabled{% endif %}>
              <i class="fa fa-edit"></i>
            </button>
            <button class="btn btn-sm btn-outline-danger"
                    data-bs-toggle="modal"
                    data-bs-target="#deleteModal{{ charge.id }}"
                    {% if not is_admin or charge.statut_publication == 'supprimé' %}disabled{% endif %}>
              <i class="fa fa-trash"></i>
            </button>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <div class="alert alert-info text-center">Aucune opération enregistrée.</div>
{% endif %}
